<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>All news • haven</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- tidyverse -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-news">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">haven</a>
        <small class="tidyverse">part of the <a href="http://tidyverse.org">tidyverse</a></small>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/semantics.html">Semantics</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Release notes</li>
    <li>
      <a href="../articles/releases/haven-1.0.0.html">Version 1.0.0</a>
    </li>
    <li>
      <a href="../articles/releases/haven-0.1.0.html">Version 0.1.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/tidyverse/haven">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">

  <div class="col-md-9">
    <div class="page-header">
      <h1>Change log <small>All releases</small></h1>
    </div>

    <div class="contents">
    <div id="haven-1-1-0" class="section level1">
<h1 class="hasAnchor">
<a href="#haven-1-1-0" class="anchor"></a>haven 1.1.0</h1>
<ul>
<li><p><code>write_*</code> functions turn ordered factors into labelled vectors (#285)</p></li>
<li><p><code><a href="../reference/read_sas.html">read_sas()</a></code> gains experimental <code>cols_only</code> argument to only read in specified columns (#248).</p></li>
<li><p>tibbles are created with <code><a href="http://www.rdocumentation.org/packages/tibble/topics/as_tibble">tibble::as_tibble()</a></code>, rather than by “hand” (#229).</p></li>
<li><p><code><a href="../reference/read_spss.html">read_sav()</a></code> once again correctly returns system defined missings as <code>NA</code> (rather than <code>NaN</code>) (#223).</p></li>
<li><p><code><a href="../reference/read_spss.html">write_sav()</a></code> checks that factors don’t have levels with &gt;120 characters (#262)</p></li>
<li><p>Share <code><a href="../reference/as_factor.html">as_factor()</a></code> with forcats package (#256)</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> no longer checks that all value labels are at most 32 characters (since this is not a restriction of dta files) (#239).</p></li>
<li><p>Add support for reading (<code><a href="../reference/read_xpt.html">read_xpt()</a></code>) and writing (<code><a href="../reference/read_xpt.html">write_xpt()</a></code>) SAS transport files.</p></li>
<li><p>Update to latest readstat. Includes:</p></li>
<li>SAS: support Win baltic code page (#231)</li>
<li>SAS: better error messages instead of crashes (#234, #270)</li>
<li>SAS: fix “unable to read error” (#271)</li>
<li>SPSS: support uppercase time stamps (#230)</li>
<li>SPSS: fixes for 252-255 byte strings (#226)</li>
<li><p>SPSS: fixes for 0 byte strings (#245)</p></li>
<li><p>Add support for reading and writing of SPSS’s display widths (@ecortens).</p></li>
</ul>
</div>
    <div id="haven-1-0-0" class="section level1">
<h1 class="hasAnchor">
<a href="#haven-1-0-0" class="anchor"></a>haven 1.0.0</h1>
<ul>
<li><p>The ReadStat library is stored in a subdirectory of <code>src</code> (#209, @krlmlr).</p></li>
<li><p>Import tibble so that tibbles are printed consistently (#154, @krlmlr).</p></li>
<li>
<p>Update to latest ReadStat (#65). Includes:</p>
<ul>
<li>Support for binary (aka Ross) compression for SAS (#31).</li>
<li>Support extended ASCII encoding for Stata (#71).</li>
<li>Support for Stata 14 files (#75, #212).</li>
<li>Support for SPSS value labels with more than 8 characters (#157).</li>
<li>More likely to get an error when attempting to create an invalid output file (#171).</li>
</ul>
</li>
<li><p>Added support for reading and writing variable formats. Similarly to to variable labels, formats are stored as an attribute on the vector. Use <code><a href="../reference/zap_formats.html">zap_formats()</a></code> if you want to remove these attributes. (@gorcha, #119, #123).</p></li>
<li><p>Added support for reading file “label” and “notes”. These are not currently printed, but are stored in the attributes if you need to access them (#186).</p></li>
<li><p>Added support for “tagged” missing values (in Stata these are called “extended” and in SAS these are called “special”) which carry an extra byte of information: a character label from “a” to “z”. The downside of this change is that all integer columns are now converted to doubles, to support the encoding of the tag in the payload of a NaN.</p></li>
<li>
<p>New <code><a href="../reference/labelled_spss.html">labelled_spss()</a></code> is a subclass of <code><a href="../reference/labelled.html">labelled()</a></code> that can model user missing values from SPSS. These can either be a set of distinct values, or for numeric vectors, a range. <code><a href="../reference/zap_labels.html">zap_labels()</a></code> strips labels, and replaces user-defined missing values with <code>NA</code>. New <code><a href="../reference/zap_missing.html">zap_missing()</a></code> just replaces user-defined missing vlaues with <code>NA</code>.</p>
<p><code><a href="../reference/labelled_spss.html">labelled_spss()</a></code> is potentially dangerous to work with in R because base functions don’t know about <code><a href="../reference/labelled_spss.html">labelled_spss()</a></code> functions so will return the wrong result in the presence of user-defined missing values. For this reason, they will only be created by <code>read_spss()</code> when <code>user_na = TRUE</code> (normally user-defined missings are converted to NA).</p>
</li>
<li><p><code><a href="../reference/as_factor.html">as_factor()</a></code> no longer drops the <code>label</code> attribute (variable label) when used (#177, @itsdalmo).</p></li>
<li><p>Using <code><a href="../reference/as_factor.html">as_factor()</a></code> with <code>levels = "default</code> or <code>levels = "both"</code> preserves unused labels (implicit missing) when converting (#172, @itsdalmo). Labels (and the resulting factor levels) are always sorted by values.</p></li>
<li><p><code><a href="../reference/as_factor.html">as_factor()</a></code> gains a new <code>levels = "default"</code> mechanism. This uses the labels where present, and otherwise uses the labels. This is now the default, as it seems to map better to the semantics of labelled values in other statistical packages (#81). You can also use <code>levels = "both"</code> to combine the value and the label into a single string (#82). It also gains a method for data frames, so you can easily convert every labelled column to a factor in one function call.</p></li>
<li><p>New <code><a href="https://cran.rstudio.com/web/packages/haven/vignettes/semantics.html">vignette("semantics", package = "haven")</a></code> discusses the semantics of missing values and labelling in SAS, SPSS, and Stata, and how they are translated into R.</p></li>
<li><p>Support for <code>hms()</code> has been moved into the hms package (#162). Time varibles now have class <code>c("hms", "difftime")</code> and a <code>units</code> attribute with value “secs” (#162).</p></li>
<li><p><code><a href="../reference/labelled.html">labelled()</a></code> is less strict with its checks: you can mix double and integer value and labels (#86, #110, @lionel-), and <code><a href="../reference/labelled.html">is.labelled()</a></code> is now exported (#124). Putting a labelled vector in a data frame now generates the correct column name (#193).</p></li>
<li><p><code><a href="../reference/read_dta.html">read_dta()</a></code> now recognises “%d” and custom date types (#80, #130). It also gains an encoding parameter which you can use to override the default encoding. This is particularly useful for Stata 13 and below which did not store the encoding used in the file (#163).</p></li>
<li><p><code><a href="../reference/read_spss.html">read_por()</a></code> now actually works (#35).</p></li>
<li><p><code><a href="../reference/read_spss.html">read_sav()</a></code> now correctly recognises EDATE and JDATE formats as dates (#72). Variables with format DATE, ADATE, EDATE, JDATE or SDATE are imported as <code>Date</code> variables instead of <code>POSIXct</code>. You can now set <code>user_na = TRUE</code> to preserve user defined missing values: they will be given class <code>labelled_spss</code>.</p></li>
<li><p><code><a href="../reference/read_dta.html">read_dta()</a></code>, <code><a href="../reference/read_sas.html">read_sas()</a></code>, and <code><a href="../reference/read_spss.html">read_sav()</a></code> have a better test for missing string values (#79). They can all read from connections and compressed files (@lionel-, #109)</p></li>
<li><p><code><a href="../reference/read_sas.html">read_sas()</a></code> gains an encoding parameter to overide the encoding stored in the file if it is incorrect (#176). It gets better argument names (#214).</p></li>
<li><p>Added <code>type_sum()</code> method for labelled objects so they print nicely in tibbles.</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> now verifies that variable names are valid Stata variables (#132), and throws an error if you attempt to save a labelled vector that is not an integer (#144). You can choose which <code>version</code> of Stata’s file format to output (#217).</p></li>
<li><p>New <code><a href="../reference/read_sas.html">write_sas()</a></code> allows you to write data frames out to <code>sas7bdat</code> files. This is still somewhat experimental.</p></li>
<li><p><code><a href="../reference/read_spss.html">write_sav()</a></code> writes hms variables to SPSS time variables, and the “measure” type is set for each variable (#133).</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> and <code><a href="../reference/read_spss.html">write_sav()</a></code> support writing date and date/times (#25, #139, #145). Labelled values are always converted to UTF-8 before being written out (#87). Infinite values are now converted to missing values since SPSS and Stata don’t support them (#149). Both use a better test for missing values (#70).</p></li>
<li><p><code><a href="../reference/zap_labels.html">zap_labels()</a></code> has been completely overhauled. It now works (@markriseley, #69), and only drops label attributes; it no longer replaces labelled values with <code>NA</code>s. It also gains a data frame method that zaps the labels from every column.</p></li>
<li><p><code>print.labelled()</code> and <code>print.labelled_spss()</code> now display the type.</p></li>
</ul>
</div>
    <div id="haven-0-2-0" class="section level1">
<h1 class="hasAnchor">
<a href="#haven-0-2-0" class="anchor"></a>haven 0.2.0</h1>
<ul>
<li><p>fixed a bug in <code>as_factor.labelled</code>, which generated <na>’s and wrong labels for integer labels.</na></p></li>
<li><p><code><a href="../reference/zap_labels.html">zap_labels()</a></code> now leaves unlabelled vectors unchanged, making it easier to apply to all columns.</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> and <code><a href="../reference/read_spss.html">write_sav()</a></code> take more care to always write output as UTF-8 (#36)</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> and <code><a href="../reference/read_spss.html">write_sav()</a></code> won’t crash if you give them invalid paths, and you can now use <code>~</code> to refer to your home directory (#37).</p></li>
<li><p>Byte variables are now correctly read into integers (not strings, #45), and missing values are captured correctly (#43).</p></li>
<li><p>Added <code><a href="../reference/read_dta.html">read_stata()</a></code> as alias to <code><a href="../reference/read_dta.html">read_dta()</a></code> (#52).</p></li>
<li><p><code>read_spss()</code> uses extension to automatically choose between <code><a href="../reference/read_spss.html">read_sav()</a></code> and <code><a href="../reference/read_spss.html">read_por()</a></code> (#53)</p></li>
<li><p>Updates from ReadStat. Including fixes for various parsing bugs, more encodings, and better support for large files.</p></li>
<li><p>hms objects deal better with missings when printing.</p></li>
<li><p>Fixed bug causing labels for numeric variables to be read in as integers and associated error: <code>Error: `x` and `labels` must be same type</code></p></li>
</ul>
</div>
    <div id="haven-0-1-1" class="section level1">
<h1 class="hasAnchor">
<a href="#haven-0-1-1" class="anchor"></a>haven 0.1.1</h1>
<ul>
<li>Fixed memory initialisation problems found by valgrind.</li>
</ul>
</div>
    </div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
        <li><a href="#haven-1-1-0">1.1.0</a></li>
        <li><a href="#haven-1-0-0">1.0.0</a></li>
        <li><a href="#haven-0-2-0">0.2.0</a></li>
        <li><a href="#haven-0-1-1">0.1.1</a></li>
      </ul>
    </div>
  </div>

</div>

      <footer>
      <div class="tidyverse">
  <p>haven is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="http://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>Developed by <a href='http://hadley.nz'>Hadley Wickham</a>, <a href='http://www.evanmiller.org'>Evan Miller</a>, <a href='https://www.rstudio.com'><img src='http://tidyverse.org/rstudio-logo.svg' height='24' /></a>.</p>
  <p>Site built by <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67989-18', 'auto');
  ga('send', 'pageview');
</script>
      </footer>
   </div>

  </body>
</html>
